<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Чеченский AI</title>
  </head>
<body>
  <header><button>Ненан мотт</button></header>
  <main>
    <h1>Ас муха гӀо дийр дара?</h1>
    <div class="training-log" id="trainingLog">Готов к общению</div>
    <div class="card"><div class="card-text">Сайт с AI-ассистентом. Задавайте вопросы, переводите, общайтесь на чеченском и русском.</div></div>
    <div id="chat"></div>
  </main>
  <div id="inputArea">
    <input id="userInput" type="text" placeholder="Напишите что-нибудь..." />
    <div class="input-right">
      <button class="icon-btn" onclick="startListening()" id="micButton">
        <img id="micIcon" src="mic-icon.png" alt="Микрофон">
      </button>
      <button class="icon-btn" onclick="sendMessage()" id="searchButton">
        <img id="searchIcon" src="search-mi.png" alt="Отправить">
      </button>
    </div>
  </div>
  <script>
    const API = 'http://localhost:3000'; // Заменить на свой IP/домен
    const chat = document.getElementById("chat");

    function addBubble(text, role) {
      const div = document.createElement("div");
      div.className = "bubble " + role;
      div.textContent = text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    function sendMessage() {
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if (!text) return;
      addBubble(text, "user");
      input.value = "";
      fetch(API + "/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt: text })
      })
      .then(res => res.json())
      .then(data => addBubble(data.reply, "ai"))
      .catch(() => addBubble("Ошибка подключения к AI", "ai"));
    }

    function startListening() {
      const micIcon = document.getElementById("micIcon");
      micIcon.classList.add("red");
      const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!Rec) {
        alert("Браузер не поддерживает голосовой ввод");
        micIcon.classList.remove("red");
        return;
      }
      const rec = new Rec();
      rec.lang = "ru-RU";
      rec.interimResults = false;
      rec.onresult = (e) => {
        const text = e.results[0][0].transcript;
        document.getElementById("userInput").value = text;
        sendMessage();
      };
      rec.onerror = () => micIcon.classList.remove("red");
      rec.onend = () => micIcon.classList.remove("red");
      rec.start();
    }
  </script>
</body>
</html>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Page</title>
<meta name="generator" content="WYSIWYG Web Builder 20 - https://www.wysiwygwebbuilder.com">
<link href="Сайт_создан_на_искусственном_интеллекте.css" rel="stylesheet">
<link href="index.css" rel="stylesheet">
</head>
<body>
</body>
</html>